# ASM basics
---
## Navigation

- **[[#Intel instructions]]**
---
# Basic elements
1. **[[#Integer constants and expressions]]**
2. **[[#Character and string]]**
3. **[[#Reserved words and identifiers]]**
4. **[[#Directives موجه]]**
5. **[[#Labels]]**
6. **[[#Mnemonic]]**

## Integer constants and expressions.
- Optional leading `+` or `-` sign.
- Binary, Decimal, Hexadecimal.
- Common radix characters:
	- `h` => hexadecimal  (Use as much as possible)
	- `d` => Decimal  (When hex makes no sense)
	- `b` => Binary  (For bitwise clarity)
	- `r` => Encoded real  (Real)
**Examples:**
`30d`, `6Ah`, `42`, `1101b`

>**NOTE:** Hexadecimal can't begin with a letter. => 0A2h

### Expressions
As any programming language
```txt
(2*3) + 4/6
```
---
## Character and string
- **Enclose character in single or double quotes.**
	-  `'a'` , `"a"`  => (ASCII char == 1 byte).
- **Enclose strings in single or double quotes.**
	- `"Hello"` , `'Hello'` => (Each ASCII char == 1 byte).
- **Embedded quotes are allowed**
	- `'Say "Abuqasem" is learning'`
	- `"This isn't  a test"`

> **NOTE:**
> Each string must end with a  '0' to tell the function to print until the zero.
> => "Hello world",0 (old assemblers used '$' instead of zero)

---
## Reserved words and  identifiers
- **Reserved words cannot be used as identifiers.**
	- Instruction mnemonics, directives,  type attributes, operators, predefined symbols.
- **Identifiers**
	- 1-247 chars, including digits.
	- Not case sensitive.
	- First character must be a letter. => (`_`, `@`, `?`, `$`)
	- Used for labels (Procedure names, variables, constants).
---
## Directives (موجه)
- **Instructions on how to assemble (Not at runtime).**
- **Commands that are recognized ad acted upon by the assembler.**
	- Not part of the intel instruction set.
	- Used to declare code , data areas, select memory model, declare procedures, variables etc..
	- Not case sensitive (.data,.DATA,.DAta).
- **Different assemblers have different directives**
	- GNU , netwide are not the same as MASM.
- **One important function of assembler directives is to define program sections, or segments**
	- .data (define variables)
	- .code (write code)
	- .stack 100h
 ---
 ## Labels
 - **Act as a place markers**
 	- Marks the address (offset) of code ad data.
 - **Follow identifier rules**
 - **Data label (Variable names)**
 	- Must be unique.
 	- `count DWORD 100` => (not followed by a colon)
 - **Code label**
 	- Target of jump and loop instructions.
 	- `L1:`  => (Followed by a colon)
 --- 
 ## Mnemonic
 - **No operands**
 	- `stc` => (set carry flag)
 - **One operand**
 	- `inc eax` => (register)
 	- `inc myByte` => (memory)
 - **Two operands**
 	- `add ebx,ecx` => (register, register)
 	- `sub myByte,25` => (memory, constant)
 	- `add eax,36 * 25` => (register, const-expr)

### NOP instruction
- No Operation.
- Uses 1 byte of storage.
- CPU: Reads it, Decodes it, ignores it.
- Used to allign code to even-address boundaries (multiple of 4):
```txt
0  mov ax,5
3  nop      ; alligns next instruction
4  add ax,8
```
- x86 processors are designed to load code and data more quickly from even-doubleword addresses.

 ---
## Intel instructions
- **Assembled into machine code by assembler and executed at runtime by CPU.**
- **An instruction contains:**
	- Label => (Optional)
	- Mnemonic => (Required)
	- Operands => (Depends on the instruction)
	- Comment => (Optional) begins with a ';' 

```txt
[label:] mnemonic [operands] [;comment]

loop1: 
mov eax,32 ; this is a comment
```