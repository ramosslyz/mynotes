# Local PrivEsc
The main goal is to be a local administrator.This can be achieved by regular windows PrivESC techinques like:
- DLL Hijaking.
- Unquoted service path.
- Missing patches.
- Automated deployment and AutoLogon passwords in clear text.
- AlwaysInstallElevated (Any user can run MSI as SYSTEM).
- Misconfigured Services.
### Tools than can be used for PrivESC
- [**PowerView**](https://github.com/PowerShellMafia/PowerSploit/tree/master/Recon)
- [**BeRoot**](https://github.com/AlessandroZ/BeRoot/releases)
- [**Privesc**](https://github.com/enjoiz/Privesc)

#### Run all checks:
- **PowerUp **-> Invoke-AllChecks
- **BeRoot** -> .\beroot.exe
- **Privesc **-> Invoke-PrivESC
---
### Unquoted service path
```powershell
#Lets suppose we have this service running
C:\FTPServer\FTP server\filezilla\filezilla.exe
#Notice the space between the 'FTP' and 'server'
#This can be exploited by putting an executable in the path
C:\FTPServer\FTP.exe
#Now after restrating the service our malicious executable will be executed.

#Mitigation -> put quotes.
'C:\FTPServer\FTP server\filezilla\filezilla.exe'
```

### Identification
```powershell
#Using PowerUp.ps1
Get-ServiceUnquoted -Verbose
```

### Get Services where the current user can write to its binary path or change arguments in the binary
```powershell
Get-ModifiableServiceFile -Verbose
```
### Get services whose configuration current user can modify
```powershell
Get-ModifiableService -Verbose
```
## Feature Abuse - Enterprise applications
-**Jenkins** : Runs as a local admin so getting a shell from it will let us own the machine we are on.
-- Visit the url then  find the admin user then brute force the password
-- After you get in ,navigate to /script and get a groovy payload to execute commands or get a reverse shell.
-- Suggested to try the username as the password or the reverse of the username as a password.
-- if you didn't manage to have access as an admin but you had access as a user you can abuse a project that you can "CONFIGURE" to get OS command execution.
-- Easy way to look for a Configurable project if there are many projects is to navigate to a project then adding ""/configure" and then bruteforce projects using burpsuite or whatever.

